<!DOCTYPE html>
<html>
<head>
   <title>Join Milano Tech Scene Community</title>
   <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet">
   <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-social/4.9.1/bootstrap-social.min.css" rel="stylesheet">
   <link href="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.0/sweetalert.min.css" rel="stylesheet">
   <link href="css/agency.css" rel="stylesheet">
</head>
<body>
   <div class="container">
        <div class="jumbotron">
          <h1>Join Milano Tech Scene</h1>
        </div>  
        <div class="row">
          <div class="col-md-3">
          </div>
          <div class="col-md-6">
            <form class="form-horizontal" role="form" data-bind="submit: signup">
              <div class="form-group" >
                <label for="email" class="col-lg-3 control-label"><h4></h4></label>
                <input data-bind="value: email, valueUpdate:'input'" id="email" type="email" class="input-lg" placeholder="Your email"/>
                <button id="form-submit" type="submit" data-bind="enable: email.isValid()" class="btn btn-lg btn-primary">Signup</button>
              </div>
            </form>
          </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.0/sweetalert.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.3.0/knockout-min.js"></script>
    <script src="js/knockout.validation.min.js"></script>
    <script src="js/axios.min.js"></script>
    <script type="text/javascript">
      var AppViewModel = function () {
        var self = this;

        self.email = ko.observable("").extend({ required: true, email: true });
        self.firstName = ko.observable("");
        self.lastName = ko.observable("");
        self.name = ko.computed(function() {
          return this.firstName() + " " + this.lastName();
        }, this);


        self.signup = function() {
          self.send();
          Intercom('boot', {
            app_id: "h5m9iozj",
            email: self.email(),
            first_name: self.firstName(),
            last_name: self.lastName(),
            name: self.name()
          });
        }

        self.send = function(email) {
          axios.post('https://invito.apispark.net/v1/signups', {
            email: self.email(),
            owner: '55d5e49e4b6552892c51e552',
            firstname: self.firstName(),
            lastname: self.lastName(),
            name: self.name(),
          })
          .then(function (response) {
            console.log(response);
            swal("Welcome to Milano Tech Scene", "Enjoy the networking", "success")
          })
          .catch(function (response) {
            console.log(response);
            swal("Oops", "Something went wrong", "warning")
          });
        }
      }

      ko.applyBindings(new AppViewModel());
    </script>

        <script>(function(){var w=window;var ic=w.Intercom;if(typeof ic==="function"){ic('reattach_activator');ic('update',intercomSettings);}else{var d=document;var i=function(){i.c(arguments)};i.q=[];i.c=function(args){i.q.push(args)};w.Intercom=i;function l(){var s=d.createElement('script');s.type='text/javascript';s.async=true;s.src='https://widget.intercom.io/widget/h5m9iozj';var x=d.getElementsByTagName('script')[0];x.parentNode.insertBefore(s,x);}if(w.attachEvent){w.attachEvent('onload',l);}else{w.addEventListener('load',l,false);}}})()</script>

</body>
</html>
